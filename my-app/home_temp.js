const ajaxCall=new ApiCall;let positions="";var isLoadedInMobile=!1,currentLocation=!0;function addParams(){$(".footer_city").find("a").each(function(){var currLink=$(this).attr("href");const lat=positions.latitude,lng=positions.longitude;var link=`&lat=${lat}&lng=${lng}`;$(this).attr("href",currLink+link)})}function submitThePage(){let finalURL,searchByName=!1;if($("#searchByName").is(":visible")&&!(searchByName=$("#searchByName input").val()))return void showError("Please enter the name to search.");let cityName=$("#SClocation").val();$("#mobileCitySelctionWrapper").is(":visible")&&(cityName=$("#mobileCitySelctionWrapper button.active").data("value"));let localityName=$("#localitySlecter").val();if("cLoc"==cityName)return void showError("Please select your city.");if(!(searchByName||localityName&&"Current Location"!=localityName))return void showError("Please enter your locality.");const type=encodeURI($("#SCspecialization").val()),city=encodeURI(cityName),locality=encodeURI(localityName);if(finalURL=searchByName?`pages/views/search.html?name=${searchByName=encodeURI(searchByName)}&city=${city}&locality=${locality}`:`pages/views/search.html?type=${type}&locality=${locality}&city=${city}`,positions){const lat=positions.latitude,lng=positions.longitude;finalURL+=currentLocation?`&lat=${lat}&lng=${lng}`:`&ulat=${lat}&ulng=${lng}`}window.location.href=finalURL}function locateMe(){getTheCurrentLocation({getTheDetails:!0,cb:function(data){if(data.status){let{data:addressObj}=data;positions=addressObj.position;let localityName="";addressObj.sublocality_level_1?localityName=addressObj.sublocality_level_1.long_name:addressObj.sublocality_level_2&&(localityName=addressObj.sublocality_level_2.long_name);const cityName=addressObj.locality.long_name;$("#SClocation").addClass("manualSlection").selectpicker("val",cityName),$("#localitySlecter").addClass("manualSlection").html(`<option selected>${localityName}</option>`).selectpicker("refresh"),$("#localitySlecter").selectpicker("val",localityName),$("#mobileCitySelctionWrapper").is(":visible")&&($("#mobileCitySelctionWrapper button.active").removeClass("active"),$(`#mobileCitySelctionWrapper button[data-value='${cityName}']`).addClass("active")),currentLocation=!0,addParams()}else{var msg="We are unable to get your location.";switch(data.code){case data.PERMISSION_DENIED:msg="Geolocation permission has been denied.";break;case data.POSITION_UNAVAILABLE:msg="Location information is unavailable.";break;case data.TIMEOUT:msg="The request to get user location timed out.";break;case data.NOT_SUPPORTED:msg="Location is not supported by this browser.";break;default:msg="We are unable to get your location."}showError(msg+" Please search for your location.")}}})}function getTopArticles(){topArticlesLoaded=!0,$.ajax({url:"https://reachmydoctor.in/blog/wp-json/wp/v2/posts?_embed&filter[orderby]=date&order=desc&per_page=4",method:"GET"}).done(function(response){var artHtml="",counter=1;response.forEach(el=>{$.ajax({url:"https://reachmydoctor.in/blog/wp-json/wp/v2/media?parent="+el.id,method:"GET"}).done(function(res){artHtml+='<div class="main-box1">\n                <a class="articles" href="'+el.link+'" target="_blank" rel="noreferrer">\n                    <div class="image-box-thum">\n                        <img class="img-fullwidth" alt="'+el.slug+'" src="'+res[0].guid.rendered+'">\n                    </div>\n                    <p class="text-center" style="font-size:16px; margin-top:6px; margin-bottom: 3px; font-weight:600;">'+el.title.rendered+'</p>\n                    <div class="articleText"> '+el.excerpt.rendered+" </div>\n                    </a> \n            </div>",4===counter?($("#forArticles").html(artHtml),setTimeout(()=>{callCarousel("#forArticles")},200)):counter++})})})}function redirectToList(type,param){var city=$("#SClocation").val();if("category"==type)city&&"cLoc"!=city?redirectListSearch(city," ",param):getLocFromIp("toList",param);else if("city"==type)redirectListSearch(city=param," "," ");else{let loc;redirectListSearch(city,$("#localitySlecter").val())}}function getLocFromIp(from,param){var settings={async:!0,url:"http://ip-api.com/json/",method:"GET"};$.ajax(settings).done(function(response){var cityName=response.city;$("#SClocation").addClass("manualSlection").selectpicker("val",cityName),$("#mobileCitySelctionWrapper").is(":visible")&&($("#mobileCitySelctionWrapper button.active").removeClass("active"),$(`#mobileCitySelctionWrapper button[data-value='${cityName}']`).addClass("active")),"toList"==from&&redirectListSearch(cityName," ",param)})}function getArticles(){let mainHtml="";var settings={url:"https://reachmydoctor.in/api/v1/user/get_article_list",method:"POST",data:JSON.stringify({limit:" LIMIT 0, 4"})};$.ajax(settings).done(function(res){let theResp=JSON.parse(res);if("SUCCESS"==theResp.RESPONSE){for(let i=0;i<4;i++){const el=theResp.TIPS[i];let theurl=el.title.replace(/[^\w\s]/gi,"");theurl=theurl.replace(/\s+/g,"-").toLowerCase();let theImg=JSON.parse(el.others);mainHtml+='<div class="main-box1">\n                <a class="articles" href="https://jiyo.com/article/'+theurl+'" target="_blank" rel="noreferrer">\n                    <div class="image-box-thum" style="height: 142px; overflow:hidden;">\n                        <img class="img-fullwidth" alt="'+el.title+'" src="'+theImg[0].img+'">\n                    </div>\n                    <p class="text-center" style="font-size:16px; margin-top:6px; margin-bottom: 3px; font-weight:600;">'+el.title+'</p>\n                    <span class="text-muted small pull-right"> -'+theImg[0].author+"</span>\n                    </a> \n                </div>"}let theHtml;$(`<section class="topcatagories-warpper">\n            <div class="container">\n                <div class="section-content">\n                    <div class="row">\n                        <div class="col-md-12 main-content">\n                            <h2 class="title line-bottom top-title mt-0 mt-sm-30"><span>Jiyo<span class="text-theme-colored">\n                                        Articles</span></span></h2>\n                            <div class="clearfix"></div>\n                            <div class="row owl-carousel owl-theme" id="forJiyoArts">\n                                ${mainHtml}\n                            </div>\n                            <div class="owl-theme">\n                            <div class="owl-controls">\n                                <div class="custom-nav owl-nav"></div>\n                            </div>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>`).insertBefore(".safty-wrapper"),callCarousel("#forJiyoArts")}})}function redirectListSearch(city,loc,type){city=null==city?"":city,loc=null==loc?"":loc,type=null==type?"":type;var link="pages/views/list_search.html?city="+encodeURI(city)+"&loc="+encodeURI(loc)+"&type="+encodeURI(type);if(positions){const lat=positions.latitude,lng=positions.longitude,locality=encodeURI($("#localitySlecter").val());link+=`&lat=${lat}&lng=${lng}&locality=${locality}`}window.location.href=link}function callCarousel(el=""){"#signupCarouse"==el?$(el).owlCarousel({stagePadding:10,dots:!0,lazyLoad:!0,loop:!0,margin:10,slideSpeed:1e3,responsive:{0:{items:1},600:{items:3},1000:{items:3}}}):$(el).owlCarousel({stagePadding:10,dots:!0,lazyLoad:!0,loop:!0,margin:10,slideSpeed:1e3,responsive:{0:{items:1},600:{items:3},1000:{items:4}}})}function showError(msg){$(".alert-error")[0]&&$("#error-message").remove();var message=$('<div class="alert alert-error" id="error-message" style="display: none;">'),close=$('<button type="button" class="close" data-dismiss="alert">&times</button>');message.append(close),message.append('<p style="width: 90%;">'+msg+"</p>"),message.appendTo($(".rmd-blured-bg")).fadeIn(300).delay(6e3).fadeOut(500)}jQuery(document).ready(function($){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1]))return"IE "+((tem=/\brv[ :]+(\d+)/g.exec(ua)||[])[1]||"");if("Chrome"===M[1]&&null!=(tem=ua.match(/\b(OPR|Edge)\/(\d+)/)))return tem.slice(1).join(" ").replace("OPR","Opera");M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(tem=ua.match(/version\/(\d+)/i))&&M.splice(1,1,tem[1]);var imgUrl="pages/images/comp/reachMydoctor-intro.jpg";window.innerWidth<=767&&($("#topCities").remove(),$("#topCategories").remove(),$(".footer_city").remove(),isLoadedInMobile=!0,getArticles(),imgUrl="pages/images/comp/reachMydoctor-intro-mobile.jpg"),$(".intro-body").attr("style","background: url("+imgUrl+") 50% 0 no-repeat ; background-origin: initial; background-clip: initial;background-size: cover;background-repeat:no-repeat;background-position:0 0;background-position: center;"),setTimeout(()=>{callCarousel("#signupCarouse"),getTopArticles(),$("img.lazy").Lazy(),callCarousel("#categoryCarouse"),callCarousel("#cityCarouse")},1e3),$(".selectpicker").selectpicker();const totalToShow=4;let i=1,optionsHTML="",moreHTML="";for(var spec in specializations){let icon=specializations[spec].icon;if(i<=4){let extraClass="";4-i==1?(extraClass="extraLink2",moreHTML+=`<li class="SCclickLi extraDrpLink2" data-target="${spec}" data-icon="SCicon ${icon}"><a class="moreAnchr" href="javascript:void(0);">${spec}</a></li>`):4-i==0&&(extraClass="extraLink",moreHTML+=`<li class="SCclickLi extraDrpLink" data-target="${spec}" data-icon="SCicon ${icon}"><a class="moreAnchr" href="javascript:void(0);">${spec}</a></li>`),optionsHTML+=`<li class="SCiconsL SCclickLi ${extraClass}" data-target="${spec}">\n                                <div>\n                                    <span class="SCicon ${icon}"></span>\n                                </div>\n                                <span class="SCCategory">${spec}</span>\n                            </li>`}else moreHTML+=`<li class="SCclickLi moreLink" data-target="${spec}" data-icon="SCicon ${icon}"><a class="moreAnchr" href="javascript:void(0);">${spec}</a></li>`;i++}let finalMoreHTML=`<li id="moreIconLi" class="SCiconsL SCclickLi" data-target="more">\n                 <div>\n                    <span class="SCicon flaticon-pulse-line"></span>\n                </div>\n                <div id="dropDownWrapper">\n                <div class="dropdown" id="SCiconsMore">\n                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">More</button>\n                     <ul class="dropdown-menu">\n                     ${moreHTML}\n                     </ul>\n                </div>\n                </div>\n        </li>`,searchBynameIcon='<li class="SCiconsL SCclickLi" id="srchByNameLink" data-target="searchByName">\n                                <div id="srchByNameWrapper">\n                                    <span class="SCicon glyphicon glyphicon-search"></span>\n                                </div>\n                                <span class="SCCategory">Search</span>\n                            </li>';function getLocalities(searchTerm,cityName){ajaxCall.getTheLocalities({city:cityName,searchTerm:searchTerm,cb:function(localities){var localitiesOptions="";isLoadedInMobile&&(localitiesOptions+='<option data-content="<i class=\'glyphicon glyphicon-screenshot\'></i> Current Location">Current Location</option> <option data-divider="true"></option>'),localities.forEach(locality=>{localitiesOptions+=`<option>${locality.locality}</option>`}),localitiesOptions&&$("#localitySlecter").html(localitiesOptions).selectpicker("refresh")}})}function getPincode(searchTerm,cityName){ajaxCall.getThePincodes({city:cityName,searchTerm:searchTerm,cb:function(data){var pincodeOptions="";isLoadedInMobile&&(pincodeOptions+='<option data-content="<i class=\'glyphicon glyphicon-screenshot\'></i> Current Location">Current Location</option> <option data-divider="true"></option>'),data.forEach(el=>{pincodeOptions+=`<option>${el.zip_codes}</option>`}),pincodeOptions&&$("#localitySlecter").html(pincodeOptions).selectpicker("refresh")}})}$("#SCiconsUl").html(optionsHTML+finalMoreHTML+searchBynameIcon),$("ul#SCiconsUl li.SCclickLi").click(function(e){var targetElement=$(this),dataTarget=targetElement.data("target").toLowerCase(),iconClass;if(targetElement.hasClass("recursive"))$("#moreIconLi").removeClass("recursive");else if(!$(e.target).hasClass("dropdown-toggle")){if($("ul#SCiconsUl li.SCclickLi").removeClass("active"),"searchbyname"===dataTarget)return $("#searchByName").show(),$(".hideForSearchByName").hide(),$("#SCsearchContainer").show(),void $("#srchByNameLink").addClass("active");if($("#searchByName").hide(),$(".hideForSearchByName").show(),$("ul#SCiconsUl li.SCclickLi").removeClass("active"),targetElement.hasClass("moreLink")?(iconClass=targetElement.data("icon"),dataTarget=targetElement.data("target").toLowerCase(),$("#moreIconLi").addClass("recursive active")):(targetElement.addClass("active"),iconClass=targetElement.find(".SCicon").attr("class")),""!=dataTarget){$("#SCsearchContainer").show();var specialistArray=specializations[dataTarget.toLowerCase()].types;$("#specialityOPT").html(""),$(".SCspecalizationWrapper .filter-option-inner-inner").attr("class","filter-option-inner-inner "+iconClass);var optionsHtml="";let firstVal="";for(var i=0;i<specialistArray.length;i++){let[key,value]=specialistArray[i].split("~");value||(value=dataTarget+":"+key),0===i&&(firstVal=value),optionsHtml+=`<option value="${value}">${key}</option>`}$("#SCspecialization").html(optionsHtml).selectpicker("refresh"),$("#SCspecialization").selectpicker("val",firstVal)}}}),$("#mobileCitySelctionWrapper button").on("click",function(event){$("#mobileCitySelctionWrapper button.active").removeClass("active"),$(this).addClass("active"),$("#localitySlecter.selectpicker option:selected").remove(),$("#localitySlecter.selectpicker").selectpicker("refresh"),currentLocation=!1}),$(".SCloaclityWrapper input").on("keyup",function(e){let cityName=$("#SClocation").val();if($("#mobileCitySelctionWrapper").is(":visible")&&(cityName=$("#mobileCitySelctionWrapper button.active").data("value")),"cLoc"===cityName)showError("Please select your city first.");else{var elemVal=$(this).val().trim();if(""!==elemVal&&elemVal.length>=1){const numbers=/^[0-9]+$/,letters=/^[A-Za-z]+$/;elemVal.match(numbers)&&elemVal.match(letters)||(elemVal.match(numbers)?getPincode(elemVal,cityName):elemVal.match(letters)&&getLocalities(elemVal,cityName))}}}),$("#localitySlecter.selectpicker").change(function(){let cityName=$("#SClocation").val();var selectedItem=$(this).val();const numbers=/^[0-9]+$/;selectedItem.match(numbers)&&ajaxCall.getThePinLocalities({city:cityName,searchTerm:selectedItem,cb:function(localities){var localitiesOptions='<optgroup label="Select locality">';isLoadedInMobile&&(localitiesOptions+='<option data-content="<i class=\'glyphicon glyphicon-screenshot\'></i> Current Location">Current Location</option> <option data-divider="true"></option>'),localities.forEach(locality=>{localitiesOptions+=`<option>${locality.locality}</option>`}),localitiesOptions&&($("#localitySlecter").html(localitiesOptions+"</optgroup>").selectpicker("refresh"),$("#localitySlecter").selectpicker("toggle"))}})}),$("#SClocation").on("change",function(event){"cLoc"===$(this).val()?locateMe():($(this).hasClass("manualSlection")&&$(this).removeClass("manualSlection"),$("#localitySlecter.selectpicker option:selected").remove(),$("#localitySlecter.selectpicker").selectpicker("refresh"))}),$("#localitySlecter").on("change",function(event){"Current Location"===$(this).val()?locateMe():$(this).hasClass("manualSlection")?$(this).removeClass("manualSlection"):currentLocation=!1}),$("ul#SCiconsUl li.SCclickLi:first").click(),$("#SClocation").selectpicker("val","cLoc"),isLoadedInMobile&&$("#localitySlecter").html('<option data-content="<i class=\'glyphicon glyphicon-screenshot\'></i> Current Location">Current Location</option> <option data-divider="true"></option>').selectpicker("refresh")});