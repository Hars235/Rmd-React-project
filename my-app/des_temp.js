!function($){const apiBaseUrl="https://reachmydoctor.in/api/";class ApiCall{constructor({baseURI:baseURI}={}){this.apiBaseUrl=baseURI||apiBaseUrl,this.primarySettings={async:!0,crossDomain:!0,method:"POST",dataType:"json",headers:{"content-type":"text/plain"},data:{}}}onAjaxFailure({calledFrom:calledFrom,jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown}){"getMapCenter"===calledFrom&&showNoDataFound()}onBeforeAjaxCall({calledFrom:calledFrom}){return!0}onResponseFail({calledFrom:calledFrom}){"getMapCenter"===calledFrom&&showNoDataFound()}getMapCenter({specialization:specialization="",city:city,locality:locality="",cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getMapCenter"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/map/get_map_center";const data=JSON.stringify({type:specialization,city:city,locality:locality});settings.data=data,$.ajax(settings).done(function(response){if("SUCCESS"===response.RESPONSE){const{MAP_CENTER:MAP_CENTER}=response;if(MAP_CENTER&&MAP_CENTER.length){let{lat:lat,lng:lng}=MAP_CENTER[0];lat&&lng?(lat=parseFloat(lat),lng=parseFloat(lng),localStorage.setItem("location",JSON.stringify({lat:lat,lng:lng})),initMap({lat:lat,lng:lng,zoom:15,cb:function(){}})):showNoDataFound(),loader({container:$("#listContainer"),task:"stop"}),$("#mapContainer").removeClass("loader")}else showNoDataFound()}else self.onResponseFail({calledFrom:"getMapCenter"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getMapCenter",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getMapDetails({specialization:specialization,city:city,locality:locality,coordinates:coordinates={},cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getMapDetails"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/map/get_basic_details";const data=JSON.stringify({type:specialization,city:city,locality:locality,lat1:coordinates.south.toString(),lat2:coordinates.west.toString(),lng1:coordinates.north.toString(),lng2:coordinates.east.toString()});settings.data=data,$.ajax(settings).done(function(response){if("SUCCESS"===response.RESPONSE){const{MAP_BASIC_DETAILS:MAP_BASIC_DETAILS}=response;"function"==typeof cb&&cb(MAP_BASIC_DETAILS)}else self.onResponseFail({calledFrom:"getMapDetails"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getMapDetails",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getClinicDetails({id:id,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getClinicDetails"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/map/get_details";const data=JSON.stringify({id:id});settings.data=data,$.ajax(settings).done(function(response){"SUCCESS"===response.RESPONSE?"function"==typeof cb&&cb(response):self.onResponseFail({calledFrom:"getClinicDetails"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getClinicDetails",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getDocters({inst_id:inst_id,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getDocters"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"hub/web/get_doctors";const data=JSON.stringify({institution_id:inst_id});settings.data=data,$.ajax(settings).done(function(response){"SUCCESS"===response.RESPONSE?"function"==typeof cb&&cb(response):self.onResponseFail({calledFrom:"getDocters"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getDocters",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getClinicSlots({id:id,date:date,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getClinicSlots"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/verified/get_clinic_slots";const data=JSON.stringify({id:id,date:date});settings.data=data,$.ajax(settings).done(function(response){"SUCCESS"===response.RESPONSE?"function"==typeof cb&&cb(response):self.onResponseFail({calledFrom:"getClinicSlots"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getClinicSlots",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getDocterLocations({doctor_id:doctor_id,institution_id:institution_id,location_id:location_id,elemId:elemId,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getDocterLocations"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"hub/web/get_locations";const data=JSON.stringify({doctor_id:doctor_id,institution_id:institution_id,location_id:location_id});settings.data=data,$.ajax(settings).done(function(response){"SUCCESS"===response.RESPONSE?"function"==typeof cb&&cb(response,elemId):self.onResponseFail({calledFrom:"getDocterLocations"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getDocterLocations",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getDocterBookingSlots({doctor_id:doctor_id,institution_id:institution_id,location_id:location_id,elemId:elemId,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getDocterBookingSlots"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"hub/web/get_doctor_booking";const data=JSON.stringify({doctor_id:doctor_id,institution_id:institution_id,location_id:location_id});settings.data=data,$.ajax(settings).done(function(response){"SUCCESS"===response.RESPONSE?"function"==typeof cb&&cb(response,elemId):self.onResponseFail({calledFrom:"getDocterBookingSlots"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getDocterBookingSlots",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getTheLocalities({city:city,searchTerm:searchTerm,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getTheLocalities"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/autocomplete/get_localities";const data=JSON.stringify({city:city,search_term:searchTerm});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response)}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getTheLocalities",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getThePincodes({city:city,searchTerm:searchTerm,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getThePincodes"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/autocomplete/get_pincodes";const data=JSON.stringify({city:city,search_term:searchTerm});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response)}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getThePincodes",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getThePinLocalities({city:city,searchTerm:searchTerm,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getThePinLocalities"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/autocomplete/locality_pincode";const data=JSON.stringify({city:city,search_term:searchTerm});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response)}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getThePinLocalities",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}checkIfUserExists({mobile:mobile,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"checkIfUserExists"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"hub/web/get_user";const data=JSON.stringify({mobile_no:mobile});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"checkIfUserExists"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"checkIfUserExists",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}requestForOTP({mobile:mobile,name:name,deviceId:deviceId="",cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"requestForOTP"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/user/register_otp_request";const data=JSON.stringify({mobile_number:mobile,device_id:deviceId,name:name});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"requestForOTP"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"requestForOTP",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}registerTheUser({mobile:mobile,otp:otp,name:name,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"registerTheUser"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/user/register_user";const data=JSON.stringify({mobile_number:mobile,otp:otp,name:name});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"registerTheUser"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"registerTheUser",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}fixAppointMentForFMA({allDetails:allDetails,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"fixAppointMentForFMA"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"hub/web/fix_appointment";const{docter:docDetails}=allDetails;let finalDate=allDetails.date+" "+convet12To24(allDetails.slot)+":00";const data=JSON.stringify({institution_id:allDetails.INST_ID,msch_id:allDetails.msch_id,client_mobile:allDetails.userMobile,doctor_id:docDetails.docid,doc_name:docDetails.docName,doc_spec:docDetails.designation,note:allDetails.note,rmd_id:allDetails.id,rmd_address:allDetails.address,app_dateTime:finalDate});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"fixAppointMentForFMA"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"fixAppointMentForFMA",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}fixAppointMentForVerfiedNonFMA({allDetails:allDetails,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"fixAppointMentForVerfiedNonFMA"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/verified/request_appointment";const{docter:docDetails}=allDetails;let finalDate=allDetails.date+" "+parseInt(allDetails.slot)+":00";const data=JSON.stringify({client_mobile:allDetails.userMobile,appt_date:allDetails.date,appt_time:allDetails.slot,formatted_appt_time:allDetails.slot,rmd_id:allDetails.id,name:allDetails.userName,clinicName:allDetails.clinicName,locality2:allDetails.locality2,docMob:allDetails.docMob,clinicVerified:"1",reqFrom:"web"});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"fixAppointMentForVerfiedNonFMA"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"fixAppointMentForVerfiedNonFMA",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}fixAppointMentForNonFMANonVerified({allDetails:allDetails,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"fixAppointMentForNonFMANonVerified"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/main/request_appointment";const{bookingTime:bookingTime}=allDetails,data=JSON.stringify({name:allDetails.userName,mobile:allDetails.userMobile,clinicName:allDetails.clinicName,address:allDetails.address,date:bookingTime.date,time:bookingTime.time,clinicId:allDetails.id,noteToDoctor:allDetails.note,locality:allDetails.locality2});settings.data=data,$.ajax(settings).done(function(response){"function"==typeof cb&&cb(response),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"fixAppointMentForNonFMANonVerified"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"fixAppointMentForNonFMANonVerified",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getClinicsByName({clinic_name:clinic_name,city:city,locality:locality,book:book="",calledFrom:calledFrom,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getClinicsByName"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/map/get_clinics";const data=JSON.stringify({clinic_name:clinic_name,city:city,locality:locality,book:book});settings.data=data,$.ajax(settings).done(function(response){const{GET_CLINICS:GET_CLINICS}=response;if("onLoad"===calledFrom)if(loader({container:$("#listContainer"),task:"stop"}),$("#mapContainer").removeClass("loader"),GET_CLINICS&&GET_CLINICS.length){let{lat:lat,lng:lng}=GET_CLINICS[0];lat&&lng?(lat=parseFloat(lat),lng=parseFloat(lng),localStorage.setItem("location",JSON.stringify({lat:lat,lng:lng})),initMap({lat:lat,lng:lng,zoom:14,cb:function(){const mapBoundry=getTheMapBoundary();"function"==typeof cb&&cb(GET_CLINICS)}})):showNoDataFound()}else showNoDataFound();else"function"==typeof cb&&cb(GET_CLINICS),"SUCCESS"===response.RESPONSE||self.onResponseFail({calledFrom:"getClinicsByName"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getClinicsByName",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}getClinicsList({type:type,city:city,loc:loc,book:book,cb:cb}){if(!this.onBeforeAjaxCall({calledFrom:"getClinicsList"}))return!1;let self=this,settings=this.primarySettings;settings.url=this.apiBaseUrl+"v1/map/get_clinic_list";const data=JSON.stringify({type:type,city:city,loc:loc,booking:book});settings.data=data,$.ajax(settings).done(function(response){if("SUCCESS"===response.RESPONSE){const{CLINIC_LIST:CLINIC_LIST}=response;"function"==typeof cb&&cb(CLINIC_LIST)}else self.onResponseFail({calledFrom:"getClinicsList"})}).fail(function(jqXHR,textStatus,errorThrown){self.onAjaxFailure({calledFrom:"getClinicsList",jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown})})}}window.ApiCall=ApiCall}(jQuery);